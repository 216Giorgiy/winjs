<!doctype html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="winjs-orig/css/ui-light.css" />
	<script src="winjs-orig/js/WinJS.js"></script>
	<style>
		button:focus {
			background-color: orange !important
		}
		.simpleoverlay {
			display: none;
			width: 300px;
			height: 100px;
			background-color: green;
			position: absolute;
			top: 50px;
			left: 50px;
		}
		.simpleoverlay-shown {
			display: inherit;
		}
	</style>
	<script>
		WinJS.Utilities._require('WinJS/_LightDismissService');
		function init() {
			document.body.addEventListener("focusin", function (ev) {
				console.log("focus: " + pp(ev.target));
			});
			WinJS.UI.processAll().then(function () {

			});
		}

		function pp(el) {
			return el ? [el.id, el.className, el.tagName].join(":") : "<null>";
		}

		function showDialog() {
			document.getElementById("dialogEl").winControl.show().then(function (arg) {
				console.log("Dialog succ: " + arg.result);
			}, function (arg) {
				console.log("Dialog err: " + arg);
			});
		}

		function showDialog2() {
			document.getElementById("dialog2El").winControl.show().then(function (arg) {
				console.log("Dialog2 succ: " + arg.result);
			}, function (arg) {
				console.log("Dialog2 err: " + arg);
			});
		}

		function showOverlay() {
			document.getElementById("overlayEl").winControl.show();
		}

		var SimpleOverlay = WinJS.Class.define(function (element) {
			this.element = element;
			element.winControl = this;
			element.classList.add("simpleoverlay");

			var that = this;
			this._dismissable = new WinJS.UI._LightDismissService.LightDismissableElement({
				element: element,
				tabIndex: -1,
				onLightDismiss: function () {
					that.hide();
				}
			})
		}, {
			show: function () {
				this.element.classList.add("simpleoverlay-shown");
				WinJS.UI._LightDismissService.shown(this._dismissable);
			},
			hide: function () {
				WinJS.UI._LightDismissService.hidden(this._dismissable);
				this.element.classList.remove("simpleoverlay-shown");
			}
		})
	</script>
</head>
<body onload="init();">
	<button onclick="showDialog();">Dialog</button>
	<button onclick="showDialog2();">Dialog2</button>
	<button onclick="showOverlay();">Overlay</button>
	<br />

	<button id="focusMe" onclick="focusMeAlso.focus();">Focus Me</button>
	<button id="focusMeAlso" onclick="focusMe.focus();">Focus Me Also</button>

	<button onclick="focusMe.focus();">Lose Focus</button>

	<div id="dialogEl" data-win-control="WinJS.UI.ContentDialog" data-win-options="{
		primaryCommandText: 'OK',
		secondaryCommandText: 'Cancel',
		title: 'A Dialog'
	}">
		Hello
		<button onclick="showOverlay();">Overlay</button>
		<button onclick="showDialog2();">Dialog2</button>
		<button onclick="focusMe.focus();" class="loseFocus">Lose Focus</button>
	</div>

	<div id="dialog2El" data-win-control="WinJS.UI.ContentDialog" data-win-options="{
		primaryCommandText: 'OK',
		secondaryCommandText: 'Cancel',
		title: 'Another Dialog'
	}">
		Hello
		<button onclick="showOverlay();">Overlay</button>
	</div>

	<div id="overlayEl" data-win-control="SimpleOverlay">
		Hello
		<button onclick="showDialog();">Dialog</button>
	</div>
</body>
</html>