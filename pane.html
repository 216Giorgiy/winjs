<!doctype html>
<html>
<head>
    <title>Pane</title>
    <link rel="stylesheet" href="bin/Microsoft.WinJS.4.0/css/ui-light.css" />
    <script src="bin/Microsoft.WinJS.4.0/js/WinJS.js"></script>
    <style>
        .root {
            display: flex;
            flex-direction: column;
            height: calc(100% - 60px);
        }
        .controls {
            flex: none;
        }
        #app #toolPaneEl {
            flex: none;
        }
        #app .splitView {
            flex: 1 1 0%;
        }

        #app .win-splitview.win-splitview-vertical .win-pane-hidden .win-pane-content {
            height: 60px;
        }
        #app .win-splitview.win-splitview-vertical .win-pane-shown .win-pane-content {
            height: 150px;
        }

        /* ToolBar */
        #app.toolpane-top .win-toolpane {
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        #app.toolpane-bottom .win-toolpane {
            width: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
        }
        #app.toolpane-canvas .win-toolpane {
            width: 500px;
        }
    </style>
    <script>
        // Monitor focus
        window.ahc = null;
        setInterval(function () {
            if (ahc !== document.activeElement) {
                ahc = document.activeElement;
                console.log("focus: " + (ahc ? [ahc.id, ahc.className, ahc.tagName].join(":") : "<null>"));
            }
        }, 0);

        var pane;
        WinJS.Utilities.ready(function () {
            WinJS.UI.processAll().then(function () {
                pane = paneEl.winControl;

                setClosedDisplayMode();
                setPlacement();
                setOrientation();
            });
        });

        function toggleSlowAnimations() {
            WinJS.Utilities._slowAnimations = slowAnimationsEl.checked;
        }

        function setPlacement() {
            document.body.classList.remove("toolpane-top");
            document.body.classList.remove("toolpane-bottom");
            document.body.classList.remove("toolpane-canvas");
            document.body.classList.add("toolpane-" + placementEl.value);
            toolPaneEl.winControl.placement = placementEl.value === "canvas" ? "top" : placementEl.value;
        }

        function setClosedDisplayMode() {
            toolPaneEl.winControl.closedDisplayMode = closedDisplayModeEl.value;
        }

        function setOrientation() {
            var toVertical = {
                left: "top",
                right: "bottom",
                top: "top",
                bottom: "bottom"
            };
            var toHorizontal = {
                top: "left",
                bottom: "right",
                left: "left",
                right: "right"
            };
            var translation = orientationEl.value === "horizontal" ? toHorizontal : toVertical;

            [].forEach.call(document.querySelectorAll(".win-splitview .win-pane"), function (e) {
                var c = e.winControl;
                c.placement = translation[c.placement];
            });
            [].forEach.call(document.querySelectorAll(".win-splitview"), function (e) {
                e.winControl.orientation = orientationEl.value;
            });
        }

        function toggle(e) {
            var pane = e;
            while (pane && !pane.classList.contains("win-pane")) {
                pane = pane.parentElement;
            }
            if (pane) {
                pane.winControl.hidden = !pane.winControl.hidden;
            }
        }
    </script>
</head>
<body id="app">
    <div class="root">
        <div class="controls">
            <input id="slowAnimationsEl" onclick="toggleSlowAnimations();" type="checkbox" />
            <label for="slowAnimationsEl">Slow Animations</label>
            <br />

            Closed Display Mode:
            <select id="closedDisplayModeEl" onchange="setClosedDisplayMode();">
                <option value="none">None</option>
                <option value="minimum">Minimum</option>
                <option value="compact" selected="selected">Compact</option>
                <option value="full">Full</option>
            </select>

            <label for="placmentEl">Placement:</label>
            <select id="placementEl" onchange="setPlacement();">
                <option value="top">Top</option>
                <option value="bottom">Bottom</option>
                <option value="canvas">Canvas</option>
            </select>
            <br />

            SplitView Orientation:
            <select id="orientationEl" onchange="setOrientation();">
                <option value="horizontal">Horizontal</option>
                <option value="vertical">Vertical</option>
            </select>
            <br />

            <button onclick="toolPaneEl.winControl.show();">Show</button>
            <button onclick="toolPaneEl.winControl.hide();">Hide</button>
            <button class="paneButtonToggle" onclick="pane.hidden = !pane.hidden;">Toggle Pane</button>
        </div>

        <div id="toolPaneEl" data-win-control="WinJS.UI.ToolPane">
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdAdd',label:'Add',icon:'add',section:'primary',tooltip:'Add item'}"></button>
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdRemove',label:'Remove',icon:'remove',section:'primary',tooltip:'Remove item'}"></button>
            <hr data-win-control="WinJS.UI.AppBarCommand" data-win-options="{type:'separator',section:'primary'}" />
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdCamera',label:'Camera',icon:'camera',section:'primary',tooltip:'Camera'}"></button>
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdToggle',label:'Toggle',icon:'mappin',section:'primary', type:'toggle', tooltip:'Toggle'}"></button>
            <hr data-win-control="WinJS.UI.AppBarCommand" data-win-options="{type:'separator',section:'primary'}" />
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdDelete',label:'Delete',icon:'delete',section:'primary',tooltip:'Delete item'}"></button>
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdOption1',label:'Option 1',section:'secondary', type:'flyout', flyout: select('#menuFlyout')}"></button>
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdOption2',label:'Option 2',section:'secondary', type:'toggle', selected: true }"></button>
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdOption3',label:'Option 3',section:'secondary', type:'button' }"></button>
            <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdOption4',label:'Option 4',section:'secondary', type:'button' }"></button>
        </div>

        <div class="splitView" data-win-control="WinJS.UI.SplitView">
            <div id="paneEl" data-win-control="WinJS.UI.Pane">
                <p>Some text</p>
                <button class="paneButton1">Button 1</button>
                <button class="paneButton2">Button 2</button>
                <button class="paneButtonToggle" onclick="toggle(this);">Toggle Pane</button>
            </div>
            <div data-win-control="WinJS.UI.Pane">
                <p>Some text</p>
                <button class="paneButton1">Button 1</button>
                <button class="paneButton2">Button 2</button>
                <button class="paneButtonToggle" onclick="toggle(this);">Toggle Pane</button>
            </div>
            <div>
                Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello
            </div>
            <div data-win-control="WinJS.UI.Pane" data-win-options="{ placement: 'right' }">
                <p>Some text</p>
                <button class="paneButton1">Button 1</button>
                <button class="paneButton2">Button 2</button>
                <button class="paneButtonToggle" onclick="toggle(this);">Toggle Pane</button>
            </div>
        </div>
    </div>
    <!--<div class="flex">
        <div id="paneEl" class="pane" data-win-control="WinJS.UI.Pane" data-win-options="{ placement: 'left', hiddenDisplayMode: 'none' }">
            <p>Some text</p>
            <button class="paneButton1">Button 1</button>
            <button class="paneButton2">Button 2</button>
            <button class="paneButtonToggle" onclick="pane.hidden = !pane.hidden;">Toggle Pane</button>
        </div>
        <div class="content">
            Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello 
        </div>
        <div id="pane2El" class="pane" data-win-control="WinJS.UI.Pane" data-win-options="{ placement: 'right' }">
            <p>Some text</p>
            <button class="paneButton1">Button 1</button>
            <button class="paneButton2">Button 2</button>
            <button class="paneButtonToggle" onclick="pane2El.winControl.hidden = !pane2El.winControl.hidden;">Toggle Pane</button>
        </div>
    </div>-->
</body>
</html>

